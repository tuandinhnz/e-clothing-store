{"ast":null,"code":"import { combineReducers } from 'redux';\nimport { persistReducer } from 'redux-persist'; // the import below tell redux-persist that we want to use the local storage of the window object of the browser. We can also use the session storage if we want by importing the sessionstorage\n\nimport storage from 'redux-persist/lib/storage';\nimport { SET_CURRENT_USER, TOGGLE_CART_HIDDEN, ADD_ITEM_TO_CART, REMOVE_ITEM_FROM_CART, CLEAR_ITEM_FROM_CART } from '../actions/actions.type';\nimport { addItemToCart, removeItemFromCart } from './cart.utils'; //define a persist config, a JSON object represent configuration that we want Redux Persist to use\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n  // the whitelist contains the state that we want to persist. In thid case we only want to persist the cart as the user has been stored on the Firestore so there is no need to store the users locally\n  whitelist: ['cart']\n};\nconst USER_INITIAL_STATE = {\n  currentUser: null\n};\nconst CART_INITIAL_STATE = {\n  hidden: true,\n  cartItems: []\n};\n\nconst userReducer = (state = USER_INITIAL_STATE, action) => {\n  switch (action.type) {\n    case SET_CURRENT_USER:\n      return { ...state,\n        currentUser: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst cartReducer = (state = CART_INITIAL_STATE, action) => {\n  switch (action.type) {\n    case TOGGLE_CART_HIDDEN:\n      return { ...state,\n        hidden: !state.hidden\n      };\n\n    case ADD_ITEM_TO_CART:\n      //add item to an array nested inside an object\n      return { ...state,\n        cartItems: addItemToCart(state.cartItems, action.payload)\n      };\n\n    case REMOVE_ITEM_FROM_CART:\n      return { ...state,\n        cartItems: removeItemFromCart(state.cartItems, action.payload)\n      };\n\n    case CLEAR_ITEM_FROM_CART:\n      return { ...state,\n        cartItems: state.cartItems.filter(cartItem => cartItem !== action.payload)\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst rootReducer = combineReducers({\n  user: userReducer,\n  cart: cartReducer\n});\nexport default persistReducer(persistConfig, rootReducer);","map":{"version":3,"sources":["/Users/tuandinh/Documents/workspace/e-commerce/src/reducers/reducers.js"],"names":["combineReducers","persistReducer","storage","SET_CURRENT_USER","TOGGLE_CART_HIDDEN","ADD_ITEM_TO_CART","REMOVE_ITEM_FROM_CART","CLEAR_ITEM_FROM_CART","addItemToCart","removeItemFromCart","persistConfig","key","whitelist","USER_INITIAL_STATE","currentUser","CART_INITIAL_STATE","hidden","cartItems","userReducer","state","action","type","payload","cartReducer","filter","cartItem","rootReducer","user","cart"],"mappings":"AAAA,SAASA,eAAT,QAAgC,OAAhC;AACA,SAASC,cAAT,QAA+B,eAA/B,C,CACA;;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,SACEC,gBADF,EAEEC,kBAFF,EAGEC,gBAHF,EAIEC,qBAJF,EAKEC,oBALF,QAMO,yBANP;AAOA,SAASC,aAAT,EAAwBC,kBAAxB,QAAkD,cAAlD,C,CAEA;;AAEA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,GAAG,EAAE,MADe;AAEpBT,EAAAA,OAFoB;AAGpB;AACAU,EAAAA,SAAS,EAAE,CAAC,MAAD;AAJS,CAAtB;AAOA,MAAMC,kBAAkB,GAAG;AACzBC,EAAAA,WAAW,EAAE;AADY,CAA3B;AAIA,MAAMC,kBAAkB,GAAG;AACzBC,EAAAA,MAAM,EAAE,IADiB;AAEzBC,EAAAA,SAAS,EAAE;AAFc,CAA3B;;AAKA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGN,kBAAT,EAA6BO,MAA7B,KAAwC;AAC1D,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKlB,gBAAL;AACE,aAAO,EAAE,GAAGgB,KAAL;AAAYL,QAAAA,WAAW,EAAEM,MAAM,CAACE;AAAhC,OAAP;;AACF;AACE,aAAOH,KAAP;AAJJ;AAMD,CAPD;;AASA,MAAMI,WAAW,GAAG,CAACJ,KAAK,GAAGJ,kBAAT,EAA6BK,MAA7B,KAAwC;AAC1D,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKjB,kBAAL;AACE,aAAO,EACL,GAAGe,KADE;AAELH,QAAAA,MAAM,EAAE,CAACG,KAAK,CAACH;AAFV,OAAP;;AAIF,SAAKX,gBAAL;AACE;AACA,aAAO,EACL,GAAGc,KADE;AAELF,QAAAA,SAAS,EAAET,aAAa,CAACW,KAAK,CAACF,SAAP,EAAkBG,MAAM,CAACE,OAAzB;AAFnB,OAAP;;AAIF,SAAKhB,qBAAL;AACE,aAAO,EACL,GAAGa,KADE;AAELF,QAAAA,SAAS,EAAER,kBAAkB,CAACU,KAAK,CAACF,SAAP,EAAkBG,MAAM,CAACE,OAAzB;AAFxB,OAAP;;AAIF,SAAKf,oBAAL;AACE,aAAO,EACL,GAAGY,KADE;AAELF,QAAAA,SAAS,EAAEE,KAAK,CAACF,SAAN,CAAgBO,MAAhB,CACRC,QAAD,IAAcA,QAAQ,KAAKL,MAAM,CAACE,OADzB;AAFN,OAAP;;AAMF;AACE,aAAOH,KAAP;AAzBJ;AA2BD,CA5BD;;AA8BA,MAAMO,WAAW,GAAG1B,eAAe,CAAC;AAClC2B,EAAAA,IAAI,EAAET,WAD4B;AAElCU,EAAAA,IAAI,EAAEL;AAF4B,CAAD,CAAnC;AAKA,eAAetB,cAAc,CAACS,aAAD,EAAgBgB,WAAhB,CAA7B","sourcesContent":["import { combineReducers } from 'redux';\nimport { persistReducer } from 'redux-persist';\n// the import below tell redux-persist that we want to use the local storage of the window object of the browser. We can also use the session storage if we want by importing the sessionstorage\nimport storage from 'redux-persist/lib/storage';\nimport {\n  SET_CURRENT_USER,\n  TOGGLE_CART_HIDDEN,\n  ADD_ITEM_TO_CART,\n  REMOVE_ITEM_FROM_CART,\n  CLEAR_ITEM_FROM_CART,\n} from '../actions/actions.type';\nimport { addItemToCart, removeItemFromCart } from './cart.utils';\n\n//define a persist config, a JSON object represent configuration that we want Redux Persist to use\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n  // the whitelist contains the state that we want to persist. In thid case we only want to persist the cart as the user has been stored on the Firestore so there is no need to store the users locally\n  whitelist: ['cart'],\n};\n\nconst USER_INITIAL_STATE = {\n  currentUser: null,\n};\n\nconst CART_INITIAL_STATE = {\n  hidden: true,\n  cartItems: [],\n};\n\nconst userReducer = (state = USER_INITIAL_STATE, action) => {\n  switch (action.type) {\n    case SET_CURRENT_USER:\n      return { ...state, currentUser: action.payload };\n    default:\n      return state;\n  }\n};\n\nconst cartReducer = (state = CART_INITIAL_STATE, action) => {\n  switch (action.type) {\n    case TOGGLE_CART_HIDDEN:\n      return {\n        ...state,\n        hidden: !state.hidden,\n      };\n    case ADD_ITEM_TO_CART:\n      //add item to an array nested inside an object\n      return {\n        ...state,\n        cartItems: addItemToCart(state.cartItems, action.payload),\n      };\n    case REMOVE_ITEM_FROM_CART:\n      return {\n        ...state,\n        cartItems: removeItemFromCart(state.cartItems, action.payload),\n      };\n    case CLEAR_ITEM_FROM_CART:\n      return {\n        ...state,\n        cartItems: state.cartItems.filter(\n          (cartItem) => cartItem !== action.payload\n        ),\n      };\n    default:\n      return state;\n  }\n};\n\nconst rootReducer = combineReducers({\n  user: userReducer,\n  cart: cartReducer,\n});\n\nexport default persistReducer(persistConfig, rootReducer);\n"]},"metadata":{},"sourceType":"module"}